<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product">
	<!-- 전체 카테고리 정보 조회 -->
	<select id="QID_SELECT_PRODUCT_CATEGORY_CONTENTS" resultType="ProductCategoryDto">
		SELECT
		y.PRODUCT_CATEGORY_NO, y.PRODUCT_CATEGORY_NAME, y.PRODUCT_CATEGORY_ORDER_BY,
  		(select count(*) from YM_PRODUCT m where y.PRODUCT_CATEGORY_NO=m.PRODUCT_CATEGORY_NO) AS PRODUCT_CATEGORY_CNT
		
		FROM
		YM_PRODUCT_CATEGORY y
	</select>
	
	<!-- 카테고리 이름으로 카테고리 정보 조회 -->
	<select id="QID_SELECT_PRODUCT_CATEGORY_CONTENTS_ONE" resultType="ProductCategoryDto">
		SELECT
		y.PRODUCT_CATEGORY_NO, y.PRODUCT_CATEGORY_NAME, y.PRODUCT_CATEGORY_ORDER_BY,
  		(select count(*) from YM_PRODUCT m where y.PRODUCT_CATEGORY_NO=m.PRODUCT_CATEGORY_NO) AS PRODUCT_CATEGORY_CNT
		
		FROM
		YM_PRODUCT_CATEGORY y
		
		WHERE
		y.PRODUCT_CATEGORY_NAME = #{inputText}
	</select>
	
	<!-- 상품 이름으로 카테고리 정보 조회 -->
	<select id="QID_SELECT_PRODUCT_CATEGORY_CONTENTS_ONE2" resultType="ProductCategoryDto">
		SELECT
  		y.PRODUCT_CATEGORY_NO, y.PRODUCT_CATEGORY_NAME, y.PRODUCT_CATEGORY_ORDER_BY,
  		(select count(*) from YM_PRODUCT m where y.PRODUCT_CATEGORY_NO=m.PRODUCT_CATEGORY_NO) AS PRODUCT_CATEGORY_CNT
		
		FROM
		YM_PRODUCT_CATEGORY y
		
		WHERE
		y.PRODUCT_CATEGORY_NO=(SELECT m2.PRODUCT_CATEGORY_NO FROM YM_PRODUCT m2 WHERE m2.PRODUCT_NAME=#{inputText2})
	</select>
	
	<!-- 상품 카테고리 MODEL 등록 -->
	<select id="QID_DELETE_PRODUCT_CATEGORY_MODEL" resultType="ProductCategoryDto">
		SELECT * FROM YM_PRODUCT_CATEGORY WHERE product_category_no = #{product_category_no}
	</select>
	
	<!-- 상품 카테고리 등록 -->
	<insert id="QID_INSERT_PRODUCT_CATEGORY">
		insert into YM_PRODUCT_CATEGORY values(ym_product_category_no_seq.nextval,#{product_category_name},#{product_category_order_by})
	</insert>
	
	<!-- 상품 카테고리 수정 -->
	<update id="QID_UPDATE_PRODUCT_CATEGORY">
		update YM_PRODUCT_CATEGORY set product_category_name = #{product_category_name}, product_category_order_by = #{product_category_order_by}
		where product_category_no = #{product_category_no}
	</update>
	
	<!-- 상품 카테고리 삭제 -->
	<delete id="QID_DELETE_PRODUCT_CATEGORY">
		delete from YM_PRODUCT_CATEGORY where PRODUCT_CATEGORY_NO=#{no}
	</delete>
</mapper>